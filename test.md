# TX-LCN 5.0.0.RC2 性能测试报告

## 方式说明

SpringCloud下测试:   
S1. 在SpringCloud下测试单LCN模块在并发20情况下循环请求的吞吐能力。   
S2. 在SpringCloud下测试单TXC模块在并发20情况下循环请求的吞吐能力。   
S3. 在SpringCloud下测试单TCC模块在并发20情况下循环请求的吞吐能力。   
S4. 在SpringCloud下测试TCC、TXC、LCN混合模块下在并发20情况下循环请求的吞吐能力。   
S5. 在SpringCloud下测试本地事务在并发20情况下循环请求的吞吐能力。   

Dubbo下测试:   
D1. 在Dubbo下测试单LCN模块在并发20情况下循环请求的吞吐能力。   
D2. 在Dubbo下测试单TXC模块在并发20情况下循环请求的吞吐能力。   
D3. 在Dubbo下测试单TCC模块在并发20情况下循环请求的吞吐能力。   
D4. 在Dubbo下测试TCC、TXC、LCN混合模块下在并发20情况下循环请求的吞吐能力。   
D5. 在Dubbo下测试本地事务在并发20情况下循环请求的吞吐能力。   


## 测试环境

硬件环境:
CPU: Intel(R) Core(TM) I5-8400 CPU @ 2.80GHz 2.81GHz   
内存: 16G   
硬盘：240G SSD    


软件环境:
系统:win10 64   
JAVA: 1.8.0_181  
Mysql: 5.7.23   
Consul: 1.2.3   
Zookeeper:3.4.9  
Dubbo:2.6.2
SpringCloud:Finchley.SR2



## 测试模块

Client D E 三个模块,Client调用一次D模块在调用一次E模块。  

Client.sayHello() -> D.rpc();   
Client.sayHello() -> E.rpc();   


### 重要配置信息

采用jmeter做的压测

线程配置
![](img/jmeter.png)
结果取值
![](img/jmeter-res.png)

jvm  -Xms256m -Xmx512m    
连接池大小 均100    
分布式事务框架未启用logger记录  



## 测试结果 

|序号	|框架	|模式	|数据一致性	|创建时间	|样本数|	KO	|Error%|	平均相应时间(ms)	|最低时间(ms)|	最高时间(ms)|	90%相应时间(ms)|	95%相应时间(ms)	|99%相应时间(ms)|	吞吐量	| Received(KB/sec)	|Sent(KB/sec)|
|----------|:-------------:|:-------------:|:-------------:|------:|------:|------:|------:|------:|------:|------:|------:|------:|------:|------:|------:|------:|
|1	|dubbo	|all	|success	|2019/1/30 6:30:32|	43603	|1	|0.002293420177510722	|54.712221636126046	|22|	2217|	62.0	|73.0	|96.0|	363.4552547345959	|48.63818177034709	|47.56152747503501|
|2	|dubbo	|lcn	|success	|2019/1/30 7:48:30|	49506	|0	|0.0|	48.158546438815485|	21	|1089	|60.0|	70.0	|90.0|	412.6978834082213|	55.21446291692023	|54.00538708662271|
|3	|dubbo	|local	|success	|2019/1/30 6:35:59|	68260	|4027|	5.89950190448286|	34.8782888954003|	11	|493	|116.0	|120.0|	163.0	|569.0704460191747	|151.54198363901625|	70.07494984889537|
|4	|dubbo	|tcc	|success	|2019/1/30 6:38:31|	44524	|0	|0.0|	53.584471296379725|	23|	1443|	54.0|	64.0|	86.0|	371.13230194718597|	49.65344274098093	|48.56614107512003|
|5	|dubbo	|txc	|success	|2019/1/30 6:41:04|	47223	|0	|0.0|	50.507506935179876|	24	|739|	52.0	|61.0|	83.0|	393.65293720459147|	52.666457418973664	|51.51317732950709|
|6	|spring	|all	|success	|2019/1/30 6:43:36|	38919	|0	|0.0|	61.30314242400823	|24|	1040|	66.0	|75.0|	95.0|	324.43584891504594|	43.40596806773564	|42.45547241661734|
|7	|spring	|lcn	|success	|2019/1/30 6:46:11|	42552	|0	|0.0|	56.055508554239466|	21	|1289	|68.0|	78.0|	103.0|	354.69162867073993|	47.45386047645642|	46.41472484558511|
|8	|spring	|local	|error	|2019/1/30 6:48:43	|48519	|6298	|12.980481873080649|	48.18905995589343|	8	|504	|155.0	|178.0|	236.0	|404.46319159046004	|168.35571489529755	|46.29641690077443|
|9	|spring	|tcc	|success	|2019/1/30 6:51:50|	39200	|0	|0.0|	60.875306122449|	26|	1160	|60.0	|69.0|	90.0|	326.75924845372856|	43.71681351382892	|42.759511028124635|
|10|	spring	|txc|	success	|2019/1/30 6:54:22|	39201	|824	|2.1019871942042294|	60.69393637917397	|6	|1168	|60.0|	82.0|	182.0	|326.80844678243614	|58.46078554993289|	41.91174286792107|




